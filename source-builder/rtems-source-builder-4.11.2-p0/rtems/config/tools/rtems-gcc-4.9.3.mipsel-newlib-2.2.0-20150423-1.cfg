#
# GCC 4.9.3, Newlib 2.2.0-1 (actually a snapshot)
#

%define gcc_version    4.9.3
%define newlib_version 2.2.0.20150423

%hash md5 gcc-%{gcc_version}.tar.bz2 6f831b4d251872736e8e9cc09746f327
%hash md5 newlib-%{newlib_version}.tar.gz c819de85d4cb4be540ebf6d405f42296

#
# Fix for MSYS2 on Windows. See ticket #2990 for details.
#
%patch add gcc -p1 https://devel.rtems.org/raw-attachment/ticket/2990/gcc-4.9.3-20170404-1.patch
%hash  sha512 gcc-4.9.3-20170404-1.patch c6402e578793e39869d0f3ba021922794e8ea30595286f63cbc9d32c5cb9ef1d9bb3be28f2a9127077d62a44f425f9c0685e3c22596aed67837fe2fcf8a09e71

#
# FreeBSD specific fix for MIPS
#
%if %{_build_os} == freebsd
 %patch add gcc --rsb-file=freebsd-libgcc-sed-fix.patch -p0 https://gcc.gnu.org/bugzilla/attachment.cgi?id=41380
 %hash  sha256 freebsd-libgcc-sed-fix.patch 8a11bd619c2e55466688e328da00b387d02395c1e8ff4a99225152387a1e60a4
%endif

#
#   Add support for mips32 little-endian
#   current path is /home/anton/Software/RTEMS/rtems-source-builder-4.11.2/rtems
#
%patch add gcc -p1 file://${_topdir}../source-builder/patches/gcc-4.9.3-mips32el.patch
%hash sha1 gcc-4.9.3-mips32el.patch 84ddffe20ec1b67264efd8971ab6025b0a6238c3

#
# The gcc/newlib build instructions.
#
%include tools/rtems-gcc-4.9-newlib-2.2.0-1.cfg
